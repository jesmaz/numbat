struct string @export {int8 [0] data}

extern def malloc @cstyle @malloc @local (uint64 size) -> (ref uint8)
extern def free @cstyle @free @local (ref uint8 ptr)


def string (const ref int8 [0] data) -> (string) {
	string str
	str.data = data
	return str
}

def string (const ref string rhs) -> (string) {
	string str
	str.data = rhs.data
	return str
}

def " + " (const ref string lhs, const ref string rhs) -> (string) {
	string str
	str.data = lhs.data + rhs.data
	return str
}